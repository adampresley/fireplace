!function(e){var t={};function n(i){if(t[i])return t[i].exports;var l=t[i]={i:i,l:!1,exports:{}};return e[i].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(i,l,function(t){return e[t]}.bind(null,l));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";class i extends React.Component{constructor(e){super(e),this.onPreviousPage=this.onPreviousPage.bind(this),this.onNextPage=this.onNextPage.bind(this),this.state={page:e.page}}onPreviousPage(e){e.preventDefault(),this.props.onPreviousPage()}onNextPage(e){e.preventDefault(),this.props.onNextPage()}componentWillReceiveProps(e){this.setState({page:e.page})}render(){return React.createElement("span",null,React.createElement(Grommet.Button,{icon:React.createElement(Grommet.CaretPreviousIcon,{onClick:this.onPreviousPage})}),React.createElement(Grommet.Label,null,this.state.page),React.createElement(Grommet.Button,{icon:React.createElement(Grommet.CaretNextIcon,{onClick:this.onNextPage})}))}}class l extends React.Component{constructor(e){super(e),this.onSelect=this.onSelect.bind(this),this.state={applicationNames:[],selected:this.props.value}}getApplicationList(){fetch("/applicationname",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.unshift("All"),this.setState({applicationNames:e})}).catch(e=>{console.log(e),alert("There was an error getting application names")})}onSelect(e){this.setState({selected:e.target.value}),this.props.onSelect(e.target.value)}componentWillReceiveProps(e){this.setState({selected:e.value}),this.getApplicationList()}componentDidMount(){this.getApplicationList()}render(){return React.createElement("div",null,React.createElement("select",{onChange:this.onSelect,value:this.state.selected},this.state.applicationNames.map(e=>React.createElement("option",{value:e,key:e},e))))}}class a extends React.Component{constructor(e){super(e),this.onSelect=this.onSelect.bind(this),this.state={levels:[{label:"All",value:""},{label:"Debug",value:"debug"},{label:"Info",value:"info"},{label:"Warning",value:"warn"},{label:"Error",value:"error"},{label:"Fatal",value:"fatal"},{label:"Panic",value:"panic"}],selected:this.props.value}}onSelect(e){this.setState({selected:e.target.value}),this.props.onSelect(e.target.value)}componentWillReceiveProps(e){this.setState({selected:e.value})}render(){return React.createElement("div",null,React.createElement("select",{onChange:this.onSelect,value:this.state.selected},this.state.levels.map(e=>React.createElement("option",{value:e.value,key:e.value},e.label))))}}class s extends React.Component{constructor(e){super(e),this.onApplicationSelect=this.onApplicationSelect.bind(this),this.onLevelSelect=this.onLevelSelect.bind(this),this.onClose=this.onClose.bind(this),this.onClear=this.onClear.bind(this),this.state={visible:!1,application:e.application,level:e.level}}onApplicationSelect(e){this.props.onApplicationSelect(e)}onLevelSelect(e){this.props.onLevelSelect(e)}onClose(){this.props.onClose()}onClear(){this.setState({application:"All",level:""}),this.props.onApplicationSelect("All"),this.props.onLevelSelect("")}componentWillReceiveProps(e){this.setState({visible:e.visible,application:e.application,level:e.level})}render(){return React.createElement("div",null,this.state.visible&&React.createElement(Grommet.Layer,{closer:!0,align:"right",overlayClose:!0,onClose:this.onClose},React.createElement(Grommet.Form,{pad:"small"},React.createElement(Grommet.Header,null,React.createElement(Grommet.Heading,null,"Filter")),React.createElement(Grommet.FormFields,null,React.createElement(l,{onSelect:this.onApplicationSelect,value:this.state.application}),React.createElement(a,{onSelect:this.onLevelSelect,value:this.state.level})),React.createElement(Grommet.Footer,{pad:{vertical:"medium"}},React.createElement(Grommet.Button,{label:"Close",type:"button",primary:!0,onClick:this.onClose}),React.createElement(Grommet.Button,{label:"Clear",type:"button",onClick:this.onClear})))))}}n.d(t,"a",function(){return o});class o extends React.Component{constructor(e){super(e),this.filterVisible=!1,this.onTitleClick=this.onTitleClick.bind(this),this.onApplicationSelect=this.onApplicationSelect.bind(this),this.onLevelSelect=this.onLevelSelect.bind(this),this.toggleFilter=this.toggleFilter.bind(this),this.onFilterClose=this.onFilterClose.bind(this),this.onRefresh=this.onRefresh.bind(this),this.state={page:e.page,filterVisible:!1,application:this.props.application,level:this.props.level}}onTitleClick(e){e.preventDefault(),window.location="/"}onApplicationSelect(e){this.props.onApplicationSelect(e)}onLevelSelect(e){this.props.onLevelSelect(e)}toggleFilter(){this.filterVisible=!this.filterVisible,this.setState({filterVisible:this.filterVisible})}onFilterClose(){this.filterVisible=!1,this.setState({filterVisible:this.filterVisible})}onRefresh(e){e.preventDefault(),this.props.onRefresh()}componentWillReceiveProps(e){this.setState({page:e.page,application:e.application,level:e.level})}render(){return React.createElement("div",null,React.createElement(Grommet.Header,{size:"small",fixed:!0},React.createElement(Grommet.Title,{onClick:this.onTitleClick},"Fireplace Viewer"),React.createElement(Grommet.Box,{flex:!0,justify:"end",direction:"row",responsive:!0},this.props.showEntryManagement&&React.createElement("div",null,React.createElement(Grommet.Search,{inline:!0,fill:!0,size:"medium",placeHolder:"Search",dropAlign:{right:"right"},onDOMChange:this.props.onSearch}),React.createElement(Grommet.Button,{icon:React.createElement(Grommet.RefreshIcon,{onClick:this.onRefresh})}),React.createElement(i,{page:this.state.page,onNextPage:this.props.onNextPage,onPreviousPage:this.props.onPreviousPage}),React.createElement(Grommet.Button,{icon:React.createElement(Grommet.FilterIcon,null),onClick:this.toggleFilter})),React.createElement(Grommet.Menu,{icon:React.createElement(Grommet.ActionsIcon,null),dropAlign:{right:"right",top:"bottom"}},React.createElement(Grommet.Anchor,{href:"/deleteoldentries",label:"Delete Old Entries"})))),React.createElement("div",null,React.createElement(s,{visible:this.state.filterVisible,onApplicationSelect:this.onApplicationSelect,onLevelSelect:this.onLevelSelect,onClose:this.onFilterClose,application:this.state.application,level:this.state.level})))}}},function(e,t,n){"use strict";n.r(t);var i=n(0);class l extends React.Component{constructor(e){super(e),this.onClose=this.onClose.bind(this),this.state={active:e.active,selectedEntry:e.selectedEntry}}onClose(){this.props.onClose()}componentWillReceiveProps(e){this.setState({active:e.active,selectedEntry:e.selectedEntry})}render(){return React.createElement("div",null,this.state.active&&React.createElement(Grommet.Layer,{closer:!0,overlayClose:!0,onClose:this.onClose,align:"right",flush:!1},React.createElement(Grommet.Article,{pad:"none",margin:"none"},React.createElement(Grommet.Header,null,"Details"),React.createElement(Grommet.Section,null,React.createElement(Grommet.Table,null,React.createElement("thead",null,React.createElement(Grommet.TableRow,null,React.createElement("th",null,"Key"),React.createElement("th",null,"Value"))),React.createElement("tbody",null,this.state.selectedEntry.details.map((e,t)=>React.createElement(Grommet.TableRow,{key:t},React.createElement("td",null,e.key),React.createElement("td",null,e.value)))))))))}}class a extends React.Component{constructor(e){super(e)}render(){return React.createElement("span",null,moment(this.props.date).format("YYYY-MM-DD hh:mm:ss A"))}}class s extends React.Component{constructor(e){super(e),this.state={entry:e.entry}}componentWillReceiveProps(e){this.setState({entry:e.entry})}render(){let e="";switch(this.state.entry.level){case"panic":case"fatal":case"error":e="critical";break;case"warning":e="warning";break;case"debug":e="disabled";break;default:e="ok"}return React.createElement(Grommet.ListItem,{justify:"between",separator:"horizontal",key:this.state.entry.id},React.createElement(Grommet.Table,{responsive:!0,className:"message-table"},React.createElement("tbody",null,React.createElement(Grommet.TableRow,null,React.createElement("td",{style:{width:"10%"}},React.createElement(Grommet.Icons.Status,{value:e})),React.createElement("td",null,this.state.entry.message)))),React.createElement("span",{className:"secondary"},React.createElement(a,{date:this.state.entry.time})))}}class o extends React.Component{constructor(e){super(e),this.onShowDetails=this.onShowDetails.bind(this),this.state={entries:e.entries}}onShowDetails(e){let t=this.state.entries[e];this.props.onShowDetails(t)}componentDidMount(){}componentWillReceiveProps(e){this.setState({entries:e.entries})}render(){let e;return e=this.state.entries.length<=0?React.createElement("p",null,"No log entries to display"):React.createElement(Grommet.List,{selectable:!0,onSelect:this.onShowDetails},this.state.entries.map(e=>React.createElement(s,{entry:e,key:e.id})))}}class r{constructor(){this.page=1,this.pageSize=0,this.totalCount=0,this.search="",this.applicationName="All",this.level=""}getLogEntries(){let e={method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"},t=`/logentry?page=${this.page}`;return this.search&&this.search.length>0&&(t+=`&search=${this.search}`),this.applicationName&&this.applicationName.length>0&&"All"!==this.applicationName&&(t+=`&application=${this.applicationName}`),this.level&&this.level.length>0&&""!==this.level&&(t+=`&level=${this.level}`),new Promise((n,i)=>{fetch(t,e).then(e=>e.json()).then(e=>(this.totalCount=e.totalCount,this.pageSize=e.pageSize,n(e.logEntries))).catch(e=>(console.log(e),i(e)))})}getPage(){return this.page}hasNextPage(){let e=Math.ceil(this.totalCount/this.pageSize);return this.page<e}hasPreviousPage(){return this.page>1}nextPage(){return this.hasNextPage()?(this.page++,this.getLogEntries()):Promise.reject("There is not a next page")}previousPage(){return this.hasPreviousPage()?(this.page--,this.getLogEntries()):Promise.reject("There is not a previous page")}refresh(){return this.page=1,this.getLogEntries()}filterByApplication(e){return this.applicationName=e,this.page=1,this.getLogEntries()}filterByLevel(e){return this.level=e,this.page=1,this.getLogEntries()}filterBySearch(e){return this.search=e,this.page=1,this.getLogEntries()}}n.d(t,"ViewerPage",function(){return c});class c extends React.Component{constructor(e){super(e),this.logEntryService=new r,this.state={entries:[],selectedEntry:void 0,detailsActive:!1,page:1,application:"All",level:"",searchTerm:""},this.onRefresh=this.onRefresh.bind(this),this.onShowDetails=this.onShowDetails.bind(this),this.handleDetailsOnClose=this.handleDetailsOnClose.bind(this),this.onNextPage=this.onNextPage.bind(this),this.onPreviousPage=this.onPreviousPage.bind(this),this.onSearch=this.onSearch.bind(this),this.onApplicationSelect=this.onApplicationSelect.bind(this),this.onLevelSelect=this.onLevelSelect.bind(this),this.updateEntryState=this.updateEntryState.bind(this)}updateEntryState(e){return new Promise(t=>{this.setState({entries:e,page:this.logEntryService.getPage()},()=>t())})}handleDetailsOnClose(){this.setState({detailsActive:!1})}onRefresh(){this.logEntryService.refresh().then(this.updateEntryState).catch(e=>{console.log(e),alert(e)})}onShowDetails(e){this.setState({detailsActive:!0,selectedEntry:e})}onNextPage(){this.logEntryService.hasNextPage()&&this.logEntryService.nextPage().then(this.updateEntryState).catch(e=>{console.log(e),alert(e)})}onPreviousPage(){this.logEntryService.hasPreviousPage()&&this.logEntryService.previousPage().then(this.updateEntryState).catch(e=>{console.log(e),alert(e)})}onSearch(e){e.preventDefault(),this.logEntryService.filterBySearch(e.target.value).then(this.updateEntryState).then(()=>{this.setState({searchTerm:e.target.value})}).catch(e=>{console.log(e),alert(e)})}onApplicationSelect(e){this.logEntryService.filterByApplication(e).then(this.updateEntryState).then(()=>{this.setState({application:e})}).catch(e=>{console.log(e),alert(e)})}onLevelSelect(e){this.logEntryService.filterByLevel(e).then(this.updateEntryState).then(()=>{this.setState({level:e})}).catch(e=>{console.log(e),alert(e)})}componentDidMount(){this.logEntryService.getLogEntries().then(e=>{this.setState({entries:e})}).catch(e=>{alert(e),console.log(e)})}render(){return React.createElement(Grommet.App,{centered:!1},React.createElement(i.a,{showEntryManagement:!0,onRefresh:this.onRefresh,onNextPage:this.onNextPage,onPreviousPage:this.onPreviousPage,onSearch:this.onSearch,onApplicationSelect:this.onApplicationSelect,onLevelSelect:this.onLevelSelect,application:this.state.application,level:this.state.level,page:this.state.page}),React.createElement(Grommet.Box,{flex:!0},React.createElement(l,{active:this.state.detailsActive,selectedEntry:this.state.selectedEntry,onClose:this.handleDetailsOnClose}),React.createElement(o,{entries:this.state.entries,onShowDetails:this.onShowDetails})))}}ReactDOM.render(React.createElement(c,null),document.getElementById("content"))}]);